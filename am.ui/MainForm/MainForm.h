#ifndef AM_UI_MAINFORM_H
#define AM_UI_MAINFORM_H

#include "am.auth.protocol.hpp"
#include "../core/basic_structures.hpp"

namespace am_ui {
	using namespace System;
	using namespace System::ComponentModel;
	using namespace System::Collections;
	using namespace System::Windows::Forms;
	using namespace System::Data;
	using namespace System::Drawing;
		
	// Main Form Class
	public ref class MainForm : public System::Windows::Forms::Form {
	public:
		// Constructor
		MainForm(void) {
			InitializeComponent();

			using System::Collections::Generic::List;
			using core::ActionItem;
			List<ActionItem^>^ actions = gcnew List<ActionItem^>();
			actions->Add(gcnew ActionItem(auth::MsgType::Start, "Start Service"));
			actions->Add(gcnew ActionItem(auth::MsgType::Stop, "Stop Service"));
			actions->Add(gcnew ActionItem(auth::MsgType::Shutdown, "Shutdown Service"));

			chooseActionBox->DisplayMember = "ActionName";
			chooseActionBox->ValueMember = "ActionType";
			chooseActionBox->DataSource = actions;

			chooseActionBox->SelectedIndex = 0;

			using namespace ipc;
			LogTracer tracer("E:\\Test.txt");
		}

	protected:
		// Destructor
		~MainForm() {
			if (components) delete components;
		}

	private:
		System::ComponentModel::Container^ components;
		System::Windows::Forms::Button^  actionBtn;
		System::Windows::Forms::ComboBox^  chooseActionBox;


		// Render Form's Component's
		void InitializeComponent(void)
		{
			this->chooseActionBox = (gcnew System::Windows::Forms::ComboBox());
			this->actionBtn = (gcnew System::Windows::Forms::Button());
			this->SuspendLayout();
			// 
			// chooseActionBox
			// 
			this->chooseActionBox->DropDownStyle = System::Windows::Forms::ComboBoxStyle::DropDownList;
			this->chooseActionBox->Font = (gcnew System::Drawing::Font(L"Microsoft Sans Serif", 10.2F, System::Drawing::FontStyle::Regular, System::Drawing::GraphicsUnit::Point,
				static_cast<System::Byte>(204)));
			this->chooseActionBox->FormattingEnabled = true;
			this->chooseActionBox->Items->AddRange(gcnew cli::array< System::Object^  >(3) { L"111", L"222", L"333" });
			this->chooseActionBox->Location = System::Drawing::Point(24, 64);
			this->chooseActionBox->Name = L"chooseActionBox";
			this->chooseActionBox->Size = System::Drawing::Size(485, 28);
			this->chooseActionBox->TabIndex = 0;
			// 
			// actionBtn
			// 
			this->actionBtn->Font = (gcnew System::Drawing::Font(L"Microsoft Sans Serif", 10.2F, System::Drawing::FontStyle::Regular, System::Drawing::GraphicsUnit::Point,
				static_cast<System::Byte>(204)));
			this->actionBtn->Location = System::Drawing::Point(24, 123);
			this->actionBtn->Name = L"actionBtn";
			this->actionBtn->Size = System::Drawing::Size(139, 71);
			this->actionBtn->TabIndex = 1;
			this->actionBtn->Text = L"Action";
			this->actionBtn->UseVisualStyleBackColor = true;
			this->actionBtn->Click += gcnew System::EventHandler(this, &MainForm::actionBtn_Click);
			// 
			// MainForm
			// 
			this->AutoScaleDimensions = System::Drawing::SizeF(8, 16);
			this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
			this->ClientSize = System::Drawing::Size(963, 588);
			this->Controls->Add(this->actionBtn);
			this->Controls->Add(this->chooseActionBox);
			this->Name = L"MainForm";
			this->Text = L"MainForm";
			this->ResumeLayout(false);

		}

		// 
		System::Void actionBtn_Click(System::Object^  sender, System::EventArgs^  e) {

		}
	};
}

#endif
