#ifndef CON_MANAGER_H
#define CON_MANAGER_H

#include "am.ipc.client-pipe.hpp"
#include "am.ipc.server-pipe.hpp"

namespace ipc {
	// Function that calculates checksum via CRC16 algorithm
	DWORD CRC16(uint8_t* addr, unsigned int length) noexcept;

	// Connection manager class
	template <class T>
	class ConnectionManager {
	protected:
		T listener;
		static const std::string dListenerName;

	public:
		// Default constructor
		ConnectionManager() noexcept: listener() { }

		// Returns connection
		virtual T GetConnection() noexcept = 0;

		// Auth function
		virtual AuthStat Auth(T& listener) noexcept = 0;

	};

}

#endif // CON_MANAGER_H
