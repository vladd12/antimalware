#ifndef AM_IPC_LOG_TRACER_H
#define AM_IPC_LOG_TRACER_H

#include <fstream>
#include "am.ipc.base-pipe.hpp"

namespace trace {
	// Enumeration for message type which Tracer have got
	enum TraceLevel {
		Info,
		Warning,
		Error
	};

	// Using UNICODE define to select output format file
	#ifdef UNICODE
	typedef std::wofstream FileStream;
	#else
	typedef std::ofstream FileStream;
	#endif

	#pragma warning(push)
	#pragma warning(disable: 4251)
	// Tracer for writing messages in Log file
	class IPC_LIB_API LogTracer {
	private:
		FileStream logFile;

		// Restriction copying LogTracer objects
		explicit LogTracer() noexcept { }
		explicit LogTracer(const LogTracer&) noexcept { }
		explicit LogTracer(LogTracer&&) noexcept { }
		void operator=(const LogTracer&) noexcept { }
		void operator=(LogTracer&&) noexcept { }

	public:
		// Constructor that gets path file
		explicit LogTracer(const char* const) noexcept;

		// Constructor that gets opened file
		explicit LogTracer(FileStream&) noexcept;

		// Destructor
		~LogTracer() noexcept;

		// Tracer returns a stream for the specified trace level
		FileStream& Trace(TraceLevel&&) noexcept;
		
	};
	#pragma warning(pop)





}

#endif // AM_IPC_LOG_TRACER_H
