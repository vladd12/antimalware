#include "../include/am.ipc.base-pipe.hpp"

// Constructor
IPC::BasePipe::BasePipe() : _hPipe(INVALID_HANDLE_VALUE), _bufSize(32) { }

// Send message to pipe function
void IPC::BasePipe::SendMsg(DWORD& msg) throw (std::runtime_error) {
	DWORD cbReplyBytes = sizeof(DWORD), cbWritten;
	BOOL fSuccess = WriteFile(_hPipe, &msg, cbReplyBytes, &cbWritten, NULL);
	if (!fSuccess || cbReplyBytes != cbWritten) {
		throw std::runtime_error("Failed write data to pipe");
	}
}
