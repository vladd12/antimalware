#include "../am.db.dbfile.hpp"

namespace db {
	// Check existing file (ASCII)
	bool IsFileExistA(LPCSTR FileName) {
		return GetFileAttributesA(FileName) != INVALID_FILE_ATTRIBUTES;
	}

	// Check existing file (Unicode)
	bool IsFileExistW(LPCWSTR FileName) {
		return GetFileAttributesW(FileName) != INVALID_FILE_ATTRIBUTES;
	}

	// DBFile constructor
	DBFile::DBFile() noexcept: RecordCount(0),
		DBSignature("ABOBA_AM_DB") { }

	// Checking state of file stream
	bool DBFile::IsOpen() noexcept {
		return hFile.is_open();
	}

	// Closing file stream
	void DBFile::CloseFile() noexcept {
		if (IsOpen()) hFile.close();
	}

	// Reopen last opened and closed file
	bool DBFile::ReOpen() noexcept {
		return Open(last);
	}

	// Getting count of records in database
	uint32_t DBFile::GetRecordCount() noexcept {
		return RecordCount;
	}

}
